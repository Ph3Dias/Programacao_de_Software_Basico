.org 0x0000;
INICIO:
	
	LDI R16, 0XFF
	OUT DDRD, R16
	OUT DDRB, R16


	LDI R16, 0B11111100
	LDI R17, 0B11111100
	LDI R18, 0B11111100
	LDI R19, 0B11111100
	LDI R20, 0B11111100
	LDI R21, 0B11111100

	RCALL ATRASO



PROXSU:

	CPI R16, 0b11110110
	BREQ CRITSU
	MOV R30, R16
	RCALL SWITCH
	MOV R16, R30
RETORNOSU:	
	RJMP ATRASO
	RJMP PROXSU
;=============================
PROXSD:
	CPI R17, 0b10110110
	BREQ CRITSD
	MOV R30, R17
	RCALL SWITCH
	MOV R17, R30
RETORNOSD:	
	RET
;=============================
	
PROXDU:
	CPI R18, 0b11110110
	BREQ CRITDU
	MOV R30, R18
	RCALL SWITCH
	MOV R18, R30
RETORNODU:
	RET
;=============================
PROXDM:
	CPI R19, 0b10110110
	BREQ CRITDM
	MOV R30, R19
	RCALL SWITCH
	MOV R19, R30
RETORNODM:
	RET
;==============================
PROXHU:
	CPI R21, 0B11011010
	BREQ TESTE
	CPI R20, 0B11110110
	BREQ CRITHU1
RETORNOHU2:
	MOV R30, R20
	RCALL SWITCH
	MOV R20, R30
RETORNOHU1:
	RET
;=============================
PROXHD:
	MOV R30, R21
	RCALL SWITCH
	MOV R21, R30
	RET
;==========================

CRITSU:
	RCALL PROXSD
	LDI R16, 0B11111100
	RJMP RETORNOSU
CRITSD:
	RCALL PROXDU
	LDI R17, 0B11111100
	RJMP RETORNOSD
CRITDU:
	RCALL PROXDM
	LDI R18, 0B11111100
	RJMP RETORNODU
CRITDM:
	RCALL PROXHU
	LDI R19, 0B11111100
	RJMP RETORNODM
CRITHU1:
	RCALL PROXHD
	LDI R20, 0B11111100
	RJMP RETORNOHU1
CRITHU2:
	LDI R21, 0B11111100
	LDI R20, 0B11111100
	RJMP RETORNOHU1
	
TESTE:
	CPI R20, 0B11110010
	BREQ CRITHU2
	RJMP RETORNOHU2
	

	
SWITCH:
	CPI R30, 0b11111100
	BREQ CASE_0

	CPI R30, 0b01100000
	BREQ CASE_1

	CPI R30, 0b11011010
	BREQ CASE_2

	CPI R30, 0b11110010
	BREQ CASE_3

	CPI R30, 0b01100110
	BREQ CASE_4
	
	CPI R30, 0b10110110
	BREQ CASE_5

	CPI R30, 0b10111110
	BREQ CASE_6

	CPI R30, 0b11100000
	BREQ CASE_7

	CPI R30, 0b11111110
	BREQ CASE_8

	CPI R30, 0b11110110
	BREQ CASE_9
	

A: RET

CASE_0:
	LDI R30, 0b01100000
	RJMP A
CASE_1:
	LDI R30, 0b11011010
	RJMP A
CASE_2:
	LDI R30, 0b11110010
	RJMP A
CASE_3:
	LDI R30, 0b01100110
	RJMP A
CASE_4:
	LDI R30, 0b10110110
	RJMP A
CASE_5:
	LDI R30, 0b10111110
	RJMP A
CASE_6:
	LDI R30, 0b11100000
	RJMP A
CASE_7:
	LDI R30, 0b11111110
	RJMP A
CASE_8:
	LDI R30, 0b11110110
	RJMP A
CASE_9:
	LDI R30, 0b11111100
	RJMP A


ATRASO:
	LDI R25, 0X0

	LDI R26, 240

L1:	LDI R27, 3;

L2:	LDI R28, 49;

L3: LDI R29, 151 ;

L4: DEC R29;1
	BRNE L4;2

	DEC R28;1
	BRNE L3;2

	DEC R27;1
	BRNE L2;2

	CPI R25, 0X0
	BREQ SU
	CPI R25, 0X1
	BREQ SD
	CPI R25, 0X2
	BREQ MU
	CPI R25, 0X3
	BREQ MD
	CPI R25, 0X4
	BREQ HU
	CPI R25, 0X5
	BREQ HD


B:  DEC R26
	BRNE L1

	RJMP PROXSU

SU:
	CBI PORTB, PB1
	SBI PORTB, PB2
	SBI PORTB, PB3
	SBI PORTB, PB4
	SBI PORTB, PB5
	SBI PORTB, PB6
	INC R25
	OUT PORTD, R16
	RJMP B
SD:
	CBI PORTB, PB2
	SBI PORTB, PB1
	SBI PORTB, PB3
	SBI PORTB, PB4
	SBI PORTB, PB5
	SBI PORTB, PB6
	INC R25
	OUT PORTD, R17
	RJMP B
MU:
	CBI PORTB, PB3
	SBI PORTB, PB1
	SBI PORTB, PB2
	SBI PORTB, PB4
	SBI PORTB, PB5
	SBI PORTB, PB6
	INC R25
	OUT PORTD, R18
	RJMP B

MD:
	CBI PORTB, PB4
	SBI PORTB, PB1
	SBI PORTB, PB2
	SBI PORTB, PB3
	SBI PORTB, PB5
	SBI PORTB, PB6
	INC R25
	OUT PORTD, R19
	RJMP B
HU:
	CBI PORTB, PB5
	SBI PORTB, PB1
	SBI PORTB, PB2
	SBI PORTB, PB3
	SBI PORTB, PB4
	SBI PORTB, PB6
	INC R25
	OUT PORTD, R20
	RJMP B
HD:
	CBI PORTB, PB6
	SBI PORTB, PB1
	SBI PORTB, PB2
	SBI PORTB, PB3
	SBI PORTB, PB4
	SBI PORTB, PB5
	LDI R25, 0X0
	OUT PORTD, R21
	RJMP B
	